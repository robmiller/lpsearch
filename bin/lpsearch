#!/usr/bin/env ruby
# encoding: utf-8

require File.dirname(__FILE__) + "/../lib/lpsearch.rb"

query = ARGV[0]

if !query
	puts "Usage: #{__FILE__} query"
	exit
end

lp = LPSearch.new

puts <<EOXML
<?xml version="1.0"?>
<items>
EOXML

lp.search query do |task|
	puts <<EOXML
	<item uid="task-#{task[:id]}" arg="#{task[:url]}" valid="yes">
		<title>#{task[:name]}</title>
		<subtitle>#{task[:description]}</subtitle>
	</item>
EOXML
end

puts <<EOXML
</items>
EOXML

